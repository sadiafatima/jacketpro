<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
			  xmlns:s="library://ns.adobe.com/flex/spark"
			  xmlns:mx="library://ns.adobe.com/flex/halo"
			  creationComplete="addSelectionPanelCallbacks()">
			  
	<fx:Script>
		<![CDATA[
		import bms.jacketpro.event.SelectionChangeEvent
		import flash.events.Event;
		import spark.components.NavigatorContent;
		
		private var selectedPart:String;
		private var selectedColour:String;
		
		public function addSelectionPanelCallbacks():void
		{
			setDefaultValues();
			parent.addEventListener(SelectionChangeEvent.COLOUR_CHANGE, updateColour);
			parent.addEventListener(SelectionChangeEvent.PART_CHANGE, partChanged);
		}
		
		public function partChanged(event:SelectionChangeEvent):void
		{
			trace("updated Part to : " + event.part);
			selectedPart = event.part;
		}
		
		public function updateColour(event:SelectionChangeEvent):void
		{
			trace("updated colour to " + event.colour);
			selectedColour = event.colour;
			updateImages();
		}
		
		private function setDefaultValues():void
		{
			selectedColour = "brown";
			selectedPart = "body";
			collarimg.source = "assets/women/collar/" + pathSuffix();
			bodyimg.source = "assets/women/body/" + pathSuffix();
			sleevesimg.source = "assets/women/sleeves/" + pathSuffix();
		}
		
		private function updateImages():void
		{
			trace("updating images");
			if (selectedPart == "collar")
				collarimg.source = "assets/women/collar/" + pathSuffix();
			else if (selectedPart == "body")
				bodyimg.source = "assets/women/body/" + pathSuffix();
			else if (selectedPart == "sleeves")
				sleevesimg.source = "assets/women/sleeves/" + pathSuffix();
				
			trace("C: " + collarimg.source);
			trace("B: " + bodyimg.source);
			trace("S: " + sleevesimg.source);
		}
		
		private function pathSuffix():String
		{
			return "leather/" + selectedColour + ".png";
		}
		
		]]>
	</fx:Script>

	<s:Image id="collarimg" clearOnLoad="false" width="250" height="220" />
	<s:Image id="bodyimg" clearOnLoad="false" width="250" height="220" />
	<s:Image id="sleevesimg" clearOnLoad="false" width="250" height="220" />
</s:Group>
